<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Login</title>
  </head>
  <body>
    <div class="container">
      <p>
        Click this login page and create a users on Auth0. Then you can use the
        APIs.
      </p>
      <a id="login" class="btn btn-info" role="button" href="https://dev-6gnrncvpus8amyed.us.auth0.com/authorize?audience=places&response_type=token&client_id=JHZwMDkNjqPZ5N7p56ixAppm5RgtFmJZ&redirect_uri=http://127.0.0.1:8080/login.html">Login</a>
      <a id="refresh" class="btn btn-info" role="button" href="https://dev-6gnrncvpus8amyed.us.auth0.com/authorize?audience=places&response_type=token&client_id=JHZwMDkNjqPZ5N7p56ixAppm5RgtFmJZ&redirect_uri=http://127.0.0.1:8080/login.html">Refresh token</a>
  
      <p>You can find the API documentation <a href="https://github.com/hamidkhbl/RentersReview" target="_blank">here</a>.</p>
  
      <h2>Your token</h2>
  
      <p id="token"></p>
      
      <div class="container">
        <h3>Decoded token</h3>
        <pre id="json"></pre>
      </div>

    </div>
  
      <script>
        var t = window.location.href.substring(
          window.location.href.indexOf("access_token=") + 13,
          window.location.href.indexOf("&expires_in=")
        );
        if (t.length > 100) {
          document.getElementById("token").innerHTML = t;
        }
  
        function jwtDecode(t) {
          let token = {};
          token.raw = t;
          token.header = JSON.parse(window.atob(t.split(".")[0]));
          token.payload = JSON.parse(window.atob(t.split(".")[1]));
          return token;
        }
        if (t.length > 100) {
          var data = jwtDecode(t)
          document.getElementById("json").innerHTML = data;
          document.getElementById("login").innerHTML = "Logout";
          document.getElementById("login").className = "btn btn-secondary";
          document.getElementById("login").href = "https://dev-6gnrncvpus8amyed.us.auth0.com/v2/logout?client_id=JHZwMDkNjqPZ5N7p56ixAppm5RgtFmJZ&returnTo=http://127.0.0.1:8080/login.html";
        }
        else{
          document.getElementById("refresh").style.display = 'none';
        }
      </script>
  
      <pre class="container"
        style="background-color: #9e97973c"
      ><code id="json-container"></code></pre>
      <script>
        document.getElementById("json-container").innerHTML = JSON.stringify(
          data,
          null,
          2
        );
      </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
